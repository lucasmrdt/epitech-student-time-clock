(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5325:function(e,t,n){e.exports=n(5474)},5474:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(16),c=n.n(o),i=n(15),s=n.n(i),u=n(17),l=n(26),p=n(27),h=n(29),d=n(28),f=n(30),m=n(88),v=n(107),g=n.n(v),b=n(58),w=n.n(b),y=n(40),k=n(32),j=n(98),O=n(100),E=n.n(O),x=n(102),C=n.n(x),P=n(104),R=n.n(P),N=n(103),S=n.n(N),_=n(101),I=n.n(_),T=n(105),L=n.n(T),A=n(99),U=n.n(A),B=n(106),D=n.n(B),W=n(59),J="http://".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_IP,":").concat(1234,"/break/toggle"),M="http://".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_IP,":").concat(1234,"/break/remove"),V="http://".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_IP,":").concat(1234,"/comment"),X="http://".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_IP,":").concat(1234,"/logins"),H=n(57),$=n.n(H),q=function(e,t){return"".concat(Array(t-e.length).fill("0").join("")).concat(e)},z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).interval=null,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.interval=setInterval(this.forceUpdate.bind(this),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.begin,t=Date.now(),n=new Date(t-e),r="".concat(n.getMinutes()),o="".concat(n.getSeconds());return a.a.createElement($.a,{align:"center"},"".concat(q(r,2)," : ").concat(q(o,2)))}}]),t}(a.a.PureComponent),F=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).commentRef=null,n.onToggle=function(){var e=n.props;(0,e.onToggle)(e.student.login)},n.onRemoveBreak=Object(j.a)(function(e){var t=n.props,r=t.student;(0,t.onRemoveBreak)(r.login,e)}),n.onEditComment=function(){if(n.commentRef){var e=n.props,t=e.onEditComment,r=e.student,a=n.commentRef.value;t(r.login,a)}},n.renderChip=function(e,t){var r=n.props.classes,o=e.begin,c=e.end;return a.a.createElement(U.a,{className:r.chip,label:"".concat(o," - ").concat(c),key:"".concat(o,"_").concat(c,"_").concat(t),onDelete:n.onRemoveBreak.bind(Object(k.a)(Object(k.a)(n)),"".concat(o," -> ").concat(c)),icon:a.a.createElement(W.b,null)})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"renderIcon",value:function(){var e=this.props.student;return"in progress"===e.status?a.a.createElement(z,{begin:e.lastUpdate}):a.a.createElement(W.a,null)}},{key:"renderProfileInformation",value:function(){var e,t=this.props,n=t.classes,r=t.student,o=r.login.split("."),c=Object(y.a)(o,2),i=c[0],s=c[1];return a.a.createElement(E.a,{className:n.item,alignItems:"center"},a.a.createElement(I.a,null,a.a.createElement(C.a,{alt:r.login,src:(e=r.login,"https://intra.epitech.eu/file/userprofil/profilview/".concat(e,".jpg")),className:n.avatar})),a.a.createElement(S.a,{primary:"".concat(i.toLowerCase()),secondary:"".concat(s.toUpperCase()),className:n.text}),a.a.createElement(R.a,null,a.a.createElement(L.a,{variant:"contained",onClick:this.onToggle},this.renderIcon())))}},{key:"renderChipList",value:function(){var e=this.props,t=e.classes,n=e.student;return a.a.createElement("div",{className:t.chipList},n.breaks.map(this.renderChip))}},{key:"renderComment",value:function(){var e=this,t=this.props,n=t.student,r=t.classes;return a.a.createElement(D.a,{className:r.comment,label:"comment",rowsMax:"4",defaultValue:n.comment,onBlur:this.onEditComment,margin:"normal",variant:"outlined",inputRef:function(t){return e.commentRef=t},multiline:!0})}},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",{className:e.container},this.renderProfileInformation(),this.renderChipList(),this.renderComment())}}]),t}(a.a.PureComponent),G=Object(m.withStyles)(function(){return{container:{width:"100%",minWidth:300,maxWidth:600},item:{marginTop:30},text:{maxWidth:"50%"},avatar:{height:100,width:100,marginRight:20},comment:{width:"100%"},chipList:{overflowX:"scroll",display:"flex"},chip:{marginRight:10,marginBottom:5}}})(F),K=function(e){var t=e.map(function(e){var t=e.breaks.map(function(e){var t=e.split(/ *->? */),n=Object(y.a)(t,2);return{begin:n[0],end:n[1]}});return{login:e.login,lastUpdate:e.lastUpdate,status:e.status,comment:e.comment,breaks:t}});return t.sort(function(e,t){return e.login<t.login?-1:e.login>t.login?1:0})},Q=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(J,{method:"POST",body:JSON.stringify({login:t,date:n}),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",K(a));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(M,{method:"POST",body:JSON.stringify({login:t,date:n}),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",K(a));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(V,{method:"POST",body:JSON.stringify({login:t,comment:n}),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",K(a));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(X,{crossDomain:!0});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",K(n));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),te=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={status:"loading",students:{}},n.onToggleStudent=function(){var e=Object(u.a)(s.a.mark(function e(t){var r,a,o,c,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,a="".concat(r.getHours()),o="".concat(r.getMinutes()),c="".concat(q(a,2),":").concat(q(o,2)),e.prev=4,e.next=7,Q(t,c);case 7:i=e.sent,n.setState({students:i}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0),alert("fail to toggle student break.");case 15:case"end":return e.stop()}},e,this,[[4,11]])}));return function(t){return e.apply(this,arguments)}}(),n.onRemoveStudentBreak=function(){var e=Object(u.a)(s.a.mark(function e(t,r){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(t,r);case 3:a=e.sent,n.setState({students:a}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("fail to remove break.");case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}(),n.onEditComment=function(){var e=Object(u.a)(s.a.mark(function e(t,r){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z(t,r);case 3:a=e.sent,n.setState({students:a}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("fail to update comment.");case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}(),n.renderItem=function(e,t){return a.a.createElement(G,{key:"".concat(e.login,"_").concat(t),onToggle:n.onToggleStudent,onRemoveBreak:n.onRemoveStudentBreak,onEditComment:n.onEditComment,student:e})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee();case 3:t=e.sent,this.setState({students:t,status:"success"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("fail to get logins."),this.setState({status:"failed"});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderError",value:function(){var e=this.props.classes;return a.a.createElement("img",{className:e.center,alt:"error",src:"https://cdn.dribbble.com/users/463734/screenshots/2016799/generic-error_shot.png"})}},{key:"renderLoading",value:function(){var e=this.props.classes;return a.a.createElement(g.a,{className:e.center})}},{key:"render",value:function(){var e=this.state,t=e.status,n=e.students,r=this.props.classes;return"loading"===t?this.renderLoading():"failed"===t?this.renderError():a.a.createElement(w.a,{className:r.container},n.map(this.renderItem))}}]),t}(a.a.PureComponent),ne=Object(m.withStyles)(function(){return{container:{height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},center:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},avatar:{height:100,width:100,marginRight:20},chipList:{overflowX:"scroll",display:"flex",paddingBottom:20},chip:{marginRight:10,marginBottom:5}}})(te),re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(a.a.createElement(ne,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");re?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ae(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ae(t,e)})}}()}},[[5325,2,1]]]);
//# sourceMappingURL=main.f17febde.chunk.js.map